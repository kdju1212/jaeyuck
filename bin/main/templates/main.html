<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout/base}">

<head>
<title>레시피 목록</title>
<link rel="stylesheet" th:href="@{/css/list.css}"
	layout:fragment="styles">
<link rel="stylesheet" th:href="@{/css/search.css}"
	layout:fragment="styles">
</head>

<body>
	<div layout:fragment="content">
		<div style="margin-top: 20px;"></div>

		<div th:replace="~{search/search :: searchBar}"></div>

		<!-- 레시피가 없을 경우 -->
		<div th:if="${#lists.isEmpty(recipeList)}">
			<h1 style="text-align: center;">등록된 레시피가 없습니다.</h1>
		</div>

		<!-- 레시피가 있을 경우 -->
		<div th:if="${!#lists.isEmpty(recipeList)}">
			<div class="cook-list">
				<div th:each="recipe : ${recipeList}" class="cook-item clickable"
					th:onclick="'redirectToInfo(' + ${recipe.recipeId} + ')'">

					<div class="cook-image">
						<img th:src="${recipe.completeImgUrl}" th:alt="${recipe.title}">

					</div>
					<div class="cook-info">
						<div class="cook-name" th:text="${recipe.title}"></div>
						<!-- <div class="read-count" th:text="${recipe.readCount + ' views'}"></div> -->
					</div>
				</div>
			</div>

			<!-- 페이징 -->
			<div class="pagination">
				<a th:if="${currentPage > 1}" th:href="@{|?page=1|}">첫 페이지</a> <a
					th:if="${currentPage > 1}" th:href="@{|?page=${currentPage - 1}|}">«
					이전</a> <span th:each="i : ${#numbers.sequence(1, totalPage)}"> <span
					th:if="${i == currentPage}" class="current" th:text="${i}"></span>
					<a th:if="${i != currentPage}" th:href="@{|?page=${i}|}"
					th:text="${i}"></a>
				</span> <a th:if="${currentPage < totalPage}"
					th:href="@{|?page=${currentPage + 1}|}">다음 »</a> <a
					th:if="${currentPage < totalPage}"
					th:href="@{|?page=${totalPage}|}">마지막 페이지</a>
			</div>
		</div>

		<!-- JS 영역 -->
		<div th:fragment="scripts">
			<script type="text/javascript" th:src="@{/js/member.js}"></script>
			<script th:src="@{/js/list.js}"></script>
			<script th:src="@{/js/search.js}"></script>
			<script th:inline="javascript">
				var contextPath = /*[[@{/}]]*/'';
				function redirectToInfo(recipeNo) {
					window.location.href ='/list/details?recipeId='
							+ recipeNo;
				}
			</script>
		</div>
	</div>
</body>
</html>
